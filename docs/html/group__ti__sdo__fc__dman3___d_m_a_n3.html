<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Framework Components Application Programming Interface (API): DMAN3</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>DMAN3</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gae0e5031bc5e947da1bd5d12cca1c5e00">DMAN3_grantDmaChannels</a> (Int groupId, <a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> algHandle[], <a class="el" href="struct_i_d_m_a3___fxns.html">IDMA3_Fxns</a> *dmaFxns[], Int numAlgs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add one or several algorithms to the DMA Manager. The DMA Manager will grant DMA resources to the algorithms as a result. This function is called when initializing XDAIS algorithm instances.  <a href="#gae0e5031bc5e947da1bd5d12cca1c5e00"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gac26a2a6153c50b10dc3ae9106bfa8594">DMAN3_exit</a> (Void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalization method of the DMAN module.  <a href="#gac26a2a6153c50b10dc3ae9106bfa8594"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gaee927c5ad460e5e5a122471ccb047db1">DMAN3_createChannels</a> (Int groupId, <a class="el" href="struct_i_d_m_a3___channel_rec.html">IDMA3_ChannelRec</a> dmaTab[], Int numChans)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate and initialize memory for one or several channel handles.  <a href="#gaee927c5ad460e5e5a122471ccb047db1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gaf0a672c8ba5962dabc8b319978aafd3b">DMAN3_init</a> (Void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization method of the DMAN3 module. <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gaf0a672c8ba5962dabc8b319978aafd3b" title="Initialization method of the DMAN3 module. DMAN3_init() uses externally configured and provided DMAN3...">DMAN3_init()</a> uses externally configured and provided DMAN3_PARAMS to initialize DMAN3 resources (QDMA channel map, memory heap...)  <a href="#gaf0a672c8ba5962dabc8b319978aafd3b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga664b5e2445c2ec3a0ed9e14f8cfc1d20">DMAN3_releaseDmaChannels</a> (<a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> algHandle[], <a class="el" href="struct_i_d_m_a3___fxns.html">IDMA3_Fxns</a> *dmaFxns[], Int numAlgs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove logical channel resources from one or several algorithm instances.  <a href="#ga664b5e2445c2ec3a0ed9e14f8cfc1d20"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga2d14c4952c1194b913ac6e8bb7f0e9d5">DMAN3_freeChannels</a> (<a class="el" href="struct_i_d_m_a3___obj.html">IDMA3_Handle</a> channelTab[], Int numChans)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Free memory for array of channel handles.  <a href="#ga2d14c4952c1194b913ac6e8bb7f0e9d5"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga5588e76c77396c16216bf7475612c9ec">DMAN3_MODNAME</a>&#160;&#160;&#160;&quot;ti.sdo.fc.dman3&quot;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Name to pass to Diags_setMask() to enable logging for DMAN3 functions. For example, Diags_setMask(DMAN3_MODNAME"+EX1234567"); turns on all Log statements in this module. Diags_setMask() must be called after initialization to take effect.  <a href="#ga5588e76c77396c16216bf7475612c9ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gacc2eb308be5d04d2b2bf935505796611">DMAN3_GTNAME</a>&#160;&#160;&#160;&quot;ti.sdo.fc.dman3&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gab4a261c271c8d0f1e9843eada6b263e8">DMAN3_MAXGROUPS</a>&#160;&#160;&#160;20</td></tr>
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_d_m_a_n3___params.html">DMAN3_Params</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The module configuration structure for DMAN3 implementation. It is set at design time by the system integrator to ensure optimal sharing of DMA resources for the execution environment.  <a href="struct_d_m_a_n3___params.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gad828e3c20733776991f5d87aaaff7aad">DMAN3_ScratchAllocFxn</a> )(<a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> alg, Int mutexId, <a class="el" href="struct_i_a_l_g___mem_rec.html">IALG_MemRec</a> *memTab, Int numRecs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function prototype for allocating IDMA3 Object's env from shared scratch memory. Algorithms might specify a particular IDMA3 protocol that provides custom DMA services. This protocol might require extra memory for the IDMA3 object's environment. DMAN3_ScratchAllocFxn might be used to allocate this memory. If this is NULL, then the env will be allocated from persistent memory.  <a href="#gad828e3c20733776991f5d87aaaff7aad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef Void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gacf1a15063787f2b589489be6234301fc">DMAN3_ScratchFreeFxn</a> )(Int mutexId, Void *addr, Uns size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function prototype for freeing IDMA3 Object's env from shared scratch memory. If this is NULL then env will be freed from persistent memory.  <a href="#gacf1a15063787f2b589489be6234301fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_d_m_a_n3___params.html">DMAN3_Params</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga1ce61c1477d05515d0f27849b3b3f1d0">DMAN3_Params</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The module configuration structure for DMAN3 implementation. It is set at design time by the system integrator to ensure optimal sharing of DMA resources for the execution environment.  <a href="#ga1ce61c1477d05515d0f27849b3b3f1d0"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_d_m_a_n3___params.html">DMAN3_Params</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gae3b96522afa89788ab1efdb5154c3e03">DMAN3_PARAMS</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default module configuration structure (defined in dman3.c).  <a href="#gae3b96522afa89788ab1efdb5154c3e03"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Uns&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga7a13bbecafc22773c55ca1b257bc75b7">ti_sdo_fc_dman3_DMAN3_numQdmaGroup</a> [20+1]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Array containing the number of Qdma channels that will be assigned to the algorithm groups for sharing.  <a href="#ga7a13bbecafc22773c55ca1b257bc75b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga67d359a006317a42ef47ae82906ed304">ti_sdo_fc_dman3_DMAN3_useCustomDma</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if custom DMA library is being used.  <a href="#ga67d359a006317a42ef47ae82906ed304"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Defines: DMAN3 Status Codes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga462d3887266b42b69cf21c65e87dc99d">DMAN3_SOK</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga70d091dae946805ff49ab47b903483a7">DMAN3_EOUTOFMEMORY</a>&#160;&#160;&#160;-1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gae81e9235f9755ac2e6a6279401c8798d">DMAN3_EFAIL</a>&#160;&#160;&#160;-2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga097f382f6603cc69c2d998c0ce6b9dfe">DMAN3_EFREE</a>&#160;&#160;&#160;-3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gab04511fe9f738b3a189758163e75f1d2">DMAN3_EOUTOFTCCS</a>&#160;&#160;&#160;-4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga45977d32b34b6e98e33b6510c9164dee">DMAN3_EOUTOFPARAMS</a>&#160;&#160;&#160;-5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga63c528d94fcf56d1af53b723dd353fb1">DMAN3_ETCCCONFIG</a>&#160;&#160;&#160;-6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gaadcb78abb90cd713d02bb0b85c021e35">DMAN3_EPARAMCONFIG</a>&#160;&#160;&#160;-7</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>DMAN3 is an application interface to the 3rd generation DMA Manager. It provides routines for granting and reclaiming DMA resources used by algorithms or other non-algorithm users. This module is used by frameworks or applications which have XDAIS algorithms that implement the IDMA3 interface.</p>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>For additional information, please refer to the "C64+ DMA Framework Design and Reference Guide" document. </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gae0e5031bc5e947da1bd5d12cca1c5e00"></a><!-- doxytag: member="dman3.h::DMAN3_grantDmaChannels" ref="gae0e5031bc5e947da1bd5d12cca1c5e00" args="(Int groupId, IALG_Handle algHandle[], IDMA3_Fxns *dmaFxns[], Int numAlgs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int DMAN3_grantDmaChannels </td>
          <td>(</td>
          <td class="paramtype">Int&#160;</td>
          <td class="paramname"> <em>groupId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&#160;</td>
          <td class="paramname"> <em>algHandle</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_d_m_a3___fxns.html">IDMA3_Fxns</a> *&#160;</td>
          <td class="paramname"> <em>dmaFxns</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Int&#160;</td>
          <td class="paramname"> <em>numAlgs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add one or several algorithms to the DMA Manager. The DMA Manager will grant DMA resources to the algorithms as a result. This function is called when initializing XDAIS algorithm instances. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">groupId</td><td>Group number for sharing TCCs and PaRAMs. Channels created with the same group number in a previous or subsequent call to this function will share the same TCCs and PaRam, as the channels created in this call, so they must be used simultaneously. The channels created in this function call, will not share TCCs and PaRam with eachother, even though they use the same group Id. When granting DMA resources for several algorithms (i.e. when numAlgs is greater than 1) these algorithms do not share TCCs and PaRAMs. If two algorithms can share TCCs and PaRAMs, two calls to <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gae0e5031bc5e947da1bd5d12cca1c5e00" title="Add one or several algorithms to the DMA Manager. The DMA Manager will grant DMA resources to the alg...">DMAN3_grantDmaChannels()</a> are needed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">algHandle[]</td><td>Array of algorithm handles. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmaFxns[]</td><td>Array of IDMA3 Interfaces associated with each algorithm handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numAlgs</td><td>Number of algorithms in algHandle array.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">DMAN3_SOK</td><td>Success. </td></tr>
    <tr><td class="paramname">DMAN3_EOUTOFMEMORY</td><td>Failed to allocate logical handle. </td></tr>
    <tr><td class="paramname">DMAN3_EFAIL</td><td>Failed to initialize handle or dmaFxns dmaInit() failed. </td></tr>
    <tr><td class="paramname">DMAN3_EOUTOFTCCS</td><td>Not enough TCCs available for channels. </td></tr>
    <tr><td class="paramname">DMAN3_EOUTOFPARAMS</td><td>Not enough PaRams available for channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>groupId &lt; DMAN3_MAXGROUPS. </dd>
<dd>
Valid IALG_Handle. </dd>
<dd>
Valid <a class="el" href="struct_i_d_m_a3___fxns.html" title="These fxns are used to query/grant the DMA resources requested by the algorithm at initialization tim...">IDMA3_Fxns</a> pointer. </dd>
<dd>
<code>IALG_Handle-&gt;fxns-&gt;implementationId == IDMA3_Fxns-&gt;implementationId</code> </dd>
<dd>
numberOfChannels returned by algorithm's dmaGetChannelCnt and dmaGetChannels is not greater than total number of Tccs allocated.</dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>DMAN3_SOK on successful allocation of IDMA3 logical handles. </dd></dl>

</div>
</div>
<a class="anchor" id="gac26a2a6153c50b10dc3ae9106bfa8594"></a><!-- doxytag: member="dman3.h::DMAN3_exit" ref="gac26a2a6153c50b10dc3ae9106bfa8594" args="(Void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Void DMAN3_exit </td>
          <td>(</td>
          <td class="paramtype">Void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finalization method of the DMAN module. </p>

</div>
</div>
<a class="anchor" id="gaee927c5ad460e5e5a122471ccb047db1"></a><!-- doxytag: member="dman3.h::DMAN3_createChannels" ref="gaee927c5ad460e5e5a122471ccb047db1" args="(Int groupId, IDMA3_ChannelRec dmaTab[], Int numChans)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int DMAN3_createChannels </td>
          <td>(</td>
          <td class="paramtype">Int&#160;</td>
          <td class="paramname"> <em>groupId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_d_m_a3___channel_rec.html">IDMA3_ChannelRec</a>&#160;</td>
          <td class="paramname"> <em>dmaTab</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Int&#160;</td>
          <td class="paramname"> <em>numChans</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate and initialize memory for one or several channel handles. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">groupId</td><td>Group number for sharing TCCs and PaRAMs. Channels created with the same group number in a previous or subsequent call to this function will share the same TCCs and PaRam, as the channels created in this call, so they must be used simultaneously. The channels created in this function call, will not share TCCs and PaRam with eachother, even though they use the same group Id. If two channels can share TCCs and PaRAMS then two calls to <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gaee927c5ad460e5e5a122471ccb047db1" title="Allocate and initialize memory for one or several channel handles.">DMAN3_createChannels()</a> are needed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmaTab</td><td>Array of IDMA3 channel resource descriptors containing the parameters of the requested channels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numChans</td><td>Number of entries in dmaTab (ie, number of channels to create). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dmaTab</td><td>On success assign valid and initialized IDMA3 logical DMA handle and environment (env, envSize) fields.</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">DMAN3_SOK</td><td>Success. </td></tr>
    <tr><td class="paramname">DMAN3_EOUTOFMEMORY</td><td>Failed to allocate logical handle. </td></tr>
    <tr><td class="paramname">DMAN3_EFAIL</td><td>Failed to initialize handle or dmaFxns dmaInit() failed. </td></tr>
    <tr><td class="paramname">DMAN3_EOUTOFTCCS</td><td>Not enough TCCs available for channels. </td></tr>
    <tr><td class="paramname">DMAN3_EOUTOFPARAMS</td><td>Not enough PaRams available for channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Valid dmaTab structure. </dd>
<dd>
numChans &gt;= 0. </dd>
<dd>
groupId &lt; DMAN3_MAXGROUPS.</dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>On success, each handle in dmaTab[] will be set to a valid IDMA3_Handle. The 'env' field of the IDMA3_Handle will be set to newly allocated memory whose size is determined by the IDMA3_InitFxns passed in the dmaTab entry. On failure, the handle of each dmaTab[] entry will be NULL. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf0a672c8ba5962dabc8b319978aafd3b"></a><!-- doxytag: member="dman3.h::DMAN3_init" ref="gaf0a672c8ba5962dabc8b319978aafd3b" args="(Void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Void DMAN3_init </td>
          <td>(</td>
          <td class="paramtype">Void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialization method of the DMAN3 module. <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gaf0a672c8ba5962dabc8b319978aafd3b" title="Initialization method of the DMAN3 module. DMAN3_init() uses externally configured and provided DMAN3...">DMAN3_init()</a> uses externally configured and provided DMAN3_PARAMS to initialize DMAN3 resources (QDMA channel map, memory heap...) </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>DMAN3_PARAMS must be initialized </dd></dl>

</div>
</div>
<a class="anchor" id="ga664b5e2445c2ec3a0ed9e14f8cfc1d20"></a><!-- doxytag: member="dman3.h::DMAN3_releaseDmaChannels" ref="ga664b5e2445c2ec3a0ed9e14f8cfc1d20" args="(IALG_Handle algHandle[], IDMA3_Fxns *dmaFxns[], Int numAlgs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int DMAN3_releaseDmaChannels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a>&#160;</td>
          <td class="paramname"> <em>algHandle</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i_d_m_a3___fxns.html">IDMA3_Fxns</a> *&#160;</td>
          <td class="paramname"> <em>dmaFxns</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Int&#160;</td>
          <td class="paramname"> <em>numAlgs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove logical channel resources from one or several algorithm instances. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">algHandle[]</td><td>Array of algorithm handles. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dmaFxns[]</td><td>Array of IDMA3 Interfaces associated with the algorithm handles. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numAlgs</td><td>Number of algorithm handles in algHandle[].</td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>algHandle is an array of valid IALG_Handle </dd>
<dd>
dmaFxns is an array of valid <a class="el" href="struct_i_d_m_a3___fxns.html" title="These fxns are used to query/grant the DMA resources requested by the algorithm at initialization tim...">IDMA3_Fxns</a> pointer </dd>
<dd>
<code>IALG_Handle-&gt;fxns-&gt;implementationId == IDMA2_Fxns-&gt;implementationId</code> </dd>
<dd>
numberOfChannels returned by algorithm's dmaGetChannelCnt and dmaGetChannels is &gt;= 0 and not greater than number of Tccs allocated</dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>Handle and environment memory and allocated resources are freed/released. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2d14c4952c1194b913ac6e8bb7f0e9d5"></a><!-- doxytag: member="dman3.h::DMAN3_freeChannels" ref="ga2d14c4952c1194b913ac6e8bb7f0e9d5" args="(IDMA3_Handle channelTab[], Int numChans)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int DMAN3_freeChannels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i_d_m_a3___obj.html">IDMA3_Handle</a>&#160;</td>
          <td class="paramname"> <em>channelTab</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Int&#160;</td>
          <td class="paramname"> <em>numChans</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free memory for array of channel handles. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">channelTab</td><td>Array of IDMA3 handles representing logical dma channel state. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numChans</td><td>Number of entries in channelTab (ie, number of channels to free).</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">DMAN3_SOK</td><td>Success.</td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code>numChans</code> &gt;= 0. </dd>
<dd>
Valid IDMA3 logical channel handles or numChans == 0.</dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>'handle' and 'env' memory freed for each channel. </dd></dl>

</div>
</div>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga5588e76c77396c16216bf7475612c9ec"></a><!-- doxytag: member="dman3.h::DMAN3_MODNAME" ref="ga5588e76c77396c16216bf7475612c9ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_MODNAME&#160;&#160;&#160;&quot;ti.sdo.fc.dman3&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Name to pass to Diags_setMask() to enable logging for DMAN3 functions. For example, Diags_setMask(DMAN3_MODNAME"+EX1234567"); turns on all Log statements in this module. Diags_setMask() must be called after initialization to take effect. </p>

</div>
</div>
<a class="anchor" id="gacc2eb308be5d04d2b2bf935505796611"></a><!-- doxytag: member="dman3.h::DMAN3_GTNAME" ref="gacc2eb308be5d04d2b2bf935505796611" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_GTNAME&#160;&#160;&#160;&quot;ti.sdo.fc.dman3&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Name to identify the GT module </p>

</div>
</div>
<a class="anchor" id="gab4a261c271c8d0f1e9843eada6b263e8"></a><!-- doxytag: member="dman3.h::DMAN3_MAXGROUPS" ref="gab4a261c271c8d0f1e9843eada6b263e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_MAXGROUPS&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum number of groups for sharing TCCs and parameter RAM. </p>

</div>
</div>
<a class="anchor" id="ga462d3887266b42b69cf21c65e87dc99d"></a><!-- doxytag: member="dman3.h::DMAN3_SOK" ref="ga462d3887266b42b69cf21c65e87dc99d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_SOK&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: Successful. </p>

</div>
</div>
<a class="anchor" id="ga70d091dae946805ff49ab47b903483a7"></a><!-- doxytag: member="dman3.h::DMAN3_EOUTOFMEMORY" ref="ga70d091dae946805ff49ab47b903483a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_EOUTOFMEMORY&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: Failed to allocate memory for the handle. </p>

</div>
</div>
<a class="anchor" id="gae81e9235f9755ac2e6a6279401c8798d"></a><!-- doxytag: member="dman3.h::DMAN3_EFAIL" ref="gae81e9235f9755ac2e6a6279401c8798d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_EFAIL&#160;&#160;&#160;-2</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: Unspecified error. </p>

</div>
</div>
<a class="anchor" id="ga097f382f6603cc69c2d998c0ce6b9dfe"></a><!-- doxytag: member="dman3.h::DMAN3_EFREE" ref="ga097f382f6603cc69c2d998c0ce6b9dfe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_EFREE&#160;&#160;&#160;-3</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: Failed to free memory. </p>

</div>
</div>
<a class="anchor" id="gab04511fe9f738b3a189758163e75f1d2"></a><!-- doxytag: member="dman3.h::DMAN3_EOUTOFTCCS" ref="gab04511fe9f738b3a189758163e75f1d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_EOUTOFTCCS&#160;&#160;&#160;-4</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: Insufficient number of TCCs available to create channels. </p>

</div>
</div>
<a class="anchor" id="ga45977d32b34b6e98e33b6510c9164dee"></a><!-- doxytag: member="dman3.h::DMAN3_EOUTOFPARAMS" ref="ga45977d32b34b6e98e33b6510c9164dee" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_EOUTOFPARAMS&#160;&#160;&#160;-5</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: Insufficient number of PaRams available to create channels. </p>

</div>
</div>
<a class="anchor" id="ga63c528d94fcf56d1af53b723dd353fb1"></a><!-- doxytag: member="dman3.h::DMAN3_ETCCCONFIG" ref="ga63c528d94fcf56d1af53b723dd353fb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_ETCCCONFIG&#160;&#160;&#160;-6</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: The number of TCCs configured for the scratchId is not enough to create the channels. This error can only be returned if <code>allowUnshared</code> is set to FALSE. </p>

</div>
</div>
<a class="anchor" id="gaadcb78abb90cd713d02bb0b85c021e35"></a><!-- doxytag: member="dman3.h::DMAN3_EPARAMCONFIG" ref="gaadcb78abb90cd713d02bb0b85c021e35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DMAN3_EPARAMCONFIG&#160;&#160;&#160;-7</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>DMAN3 Status Code: The number of PaRams configured for the scratchId is not enough to create the channels. This error can only be returned if <code>allowUnshared</code> is set to FALSE. </p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gad828e3c20733776991f5d87aaaff7aad"></a><!-- doxytag: member="dman3.h::DMAN3_ScratchAllocFxn" ref="gad828e3c20733776991f5d87aaaff7aad" args=")(IALG_Handle alg, Int mutexId, IALG_MemRec *memTab, Int numRecs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Bool(* <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gad828e3c20733776991f5d87aaaff7aad">DMAN3_ScratchAllocFxn</a>)(<a class="el" href="struct_i_a_l_g___obj.html">IALG_Handle</a> alg, Int mutexId, <a class="el" href="struct_i_a_l_g___mem_rec.html">IALG_MemRec</a> *memTab, Int numRecs)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function prototype for allocating IDMA3 Object's env from shared scratch memory. Algorithms might specify a particular IDMA3 protocol that provides custom DMA services. This protocol might require extra memory for the IDMA3 object's environment. DMAN3_ScratchAllocFxn might be used to allocate this memory. If this is NULL, then the env will be allocated from persistent memory. </p>

</div>
</div>
<a class="anchor" id="gacf1a15063787f2b589489be6234301fc"></a><!-- doxytag: member="dman3.h::DMAN3_ScratchFreeFxn" ref="gacf1a15063787f2b589489be6234301fc" args=")(Int mutexId, Void *addr, Uns size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef Void(* <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gacf1a15063787f2b589489be6234301fc">DMAN3_ScratchFreeFxn</a>)(Int mutexId, Void *addr, Uns size)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function prototype for freeing IDMA3 Object's env from shared scratch memory. If this is NULL then env will be freed from persistent memory. </p>

</div>
</div>
<a class="anchor" id="ga1ce61c1477d05515d0f27849b3b3f1d0"></a><!-- doxytag: member="dman3.h::DMAN3_Params" ref="ga1ce61c1477d05515d0f27849b3b3f1d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_d_m_a_n3___params.html">DMAN3_Params</a>  <a class="el" href="struct_d_m_a_n3___params.html">DMAN3_Params</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The module configuration structure for DMAN3 implementation. It is set at design time by the system integrator to ensure optimal sharing of DMA resources for the execution environment. </p>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>Typically, system integrators configure these settings using XDC config scripts. System integrators that use that method of configuration can ignore this structure definition. It's auto-generated during the config step by the XDC Tools. </dd></dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gae3b96522afa89788ab1efdb5154c3e03"></a><!-- doxytag: member="dman3.h::DMAN3_PARAMS" ref="gae3b96522afa89788ab1efdb5154c3e03" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_d_m_a_n3___params.html">DMAN3_Params</a> <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#gae3b96522afa89788ab1efdb5154c3e03">DMAN3_PARAMS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default module configuration structure (defined in dman3.c). </p>

</div>
</div>
<a class="anchor" id="ga7a13bbecafc22773c55ca1b257bc75b7"></a><!-- doxytag: member="dman3.h::ti_sdo_fc_dman3_DMAN3_numQdmaGroup" ref="ga7a13bbecafc22773c55ca1b257bc75b7" args="[20+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Uns <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga7a13bbecafc22773c55ca1b257bc75b7">ti_sdo_fc_dman3_DMAN3_numQdmaGroup</a>[20+1]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Array containing the number of Qdma channels that will be assigned to the algorithm groups for sharing. </p>

</div>
</div>
<a class="anchor" id="ga67d359a006317a42ef47ae82906ed304"></a><!-- doxytag: member="dman3.h::ti_sdo_fc_dman3_DMAN3_useCustomDma" ref="ga67d359a006317a42ef47ae82906ed304" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool <a class="el" href="group__ti__sdo__fc__dman3___d_m_a_n3.html#ga67d359a006317a42ef47ae82906ed304">ti_sdo_fc_dman3_DMAN3_useCustomDma</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flag indicating if custom DMA library is being used. </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1" /><small>
Copyright  2012, Texas Instruments Incorporated</small>
</body>
</html>
